{"ast":null,"code":"import React,{useState}from'react';import{BarChart3}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const HeatMap=_ref=>{let{segmentFeatures}=_ref;const[hoveredSegment,setHoveredSegment]=useState(null);// Calculate intensity based on deviation from mean\nconst calculateIntensities=()=>{if(!segmentFeatures||segmentFeatures.length===0)return[];const avgWordLengths=segmentFeatures.map(f=>f.avg_word_length);const mean=avgWordLengths.reduce((a,b)=>a+b,0)/avgWordLengths.length;const std=Math.sqrt(avgWordLengths.reduce((sum,val)=>sum+Math.pow(val-mean,2),0)/avgWordLengths.length);return avgWordLengths.map(val=>{const zScore=Math.abs((val-mean)/(std||1));return Math.min(zScore/2,1);// Normalize to 0-1\n});};const intensities=calculateIntensities();const getColor=intensity=>{if(intensity>=0.7)return'#dc2626';// red\nif(intensity>=0.5)return'#ca8a04';// yellow\nreturn'#3b82f6';// blue\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-5 h-5 text-indigo-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-slate-900\",children:\"Text Heatmap\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-slate-600 ml-2\",children:\"(Shows stylistic variation across segments)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-1 h-16 relative\",children:intensities.map((intensity,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 rounded transition-all hover:scale-105 cursor-pointer relative group\",style:{backgroundColor:getColor(intensity),opacity:0.3+intensity*0.7},onMouseEnter:()=>setHoveredSegment(idx),onMouseLeave:()=>setHoveredSegment(null),children:hoveredSegment===idx&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute -top-20 left-1/2 transform -translate-x-1/2 bg-slate-900 text-white text-xs px-3 py-2 rounded shadow-lg z-10 whitespace-nowrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold mb-1\",children:[\"Segment \",idx+1]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Deviation: \",(intensity*100).toFixed(0),\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Avg word length: \",segmentFeatures[idx].avg_word_length.toFixed(2)]})]})},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-3 text-xs text-slate-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Start of text\"}),/*#__PURE__*/_jsx(\"span\",{children:\"End of text\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-4 mt-4 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded\",style:{backgroundColor:'#3b82f6',opacity:0.5}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-600\",children:\"Low variation\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded\",style:{backgroundColor:'#ca8a04',opacity:0.7}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-600\",children:\"Medium variation\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded\",style:{backgroundColor:'#dc2626',opacity:0.9}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-600\",children:\"High variation\"})]})]})]});};","map":{"version":3,"names":["React","useState","BarChart3","jsx","_jsx","jsxs","_jsxs","HeatMap","_ref","segmentFeatures","hoveredSegment","setHoveredSegment","calculateIntensities","length","avgWordLengths","map","f","avg_word_length","mean","reduce","a","b","std","Math","sqrt","sum","val","pow","zScore","abs","min","intensities","getColor","intensity","className","children","idx","style","backgroundColor","opacity","onMouseEnter","onMouseLeave","toFixed"],"sources":["/home/abeer/Desktop/Coding/obfuscation-detector/frontend/src/components/HeatMap.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { BarChart3 } from 'lucide-react';\n\nexport const HeatMap = ({ segmentFeatures }) => {\n  const [hoveredSegment, setHoveredSegment] = useState(null);\n\n  // Calculate intensity based on deviation from mean\n  const calculateIntensities = () => {\n    if (!segmentFeatures || segmentFeatures.length === 0) return [];\n    \n    const avgWordLengths = segmentFeatures.map(f => f.avg_word_length);\n    const mean = avgWordLengths.reduce((a, b) => a + b, 0) / avgWordLengths.length;\n    const std = Math.sqrt(\n      avgWordLengths.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / avgWordLengths.length\n    );\n    \n  return avgWordLengths.map(val => {\n      const zScore = Math.abs((val - mean) / (std || 1));\n      return Math.min(zScore / 2, 1); // Normalize to 0-1\n    });\n  };\n\n  const intensities = calculateIntensities();\n\n  const getColor = (intensity) => {\n    if (intensity >= 0.7) return '#dc2626'; // red\n    if (intensity >= 0.5) return '#ca8a04'; // yellow\n    return '#3b82f6'; // blue\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-md p-6\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <BarChart3 className=\"w-5 h-5 text-indigo-600\" />\n        <h3 className=\"font-semibold text-slate-900\">Text Heatmap</h3>\n        <span className=\"text-sm text-slate-600 ml-2\">\n          (Shows stylistic variation across segments)\n        </span>\n      </div>\n      \n      <div className=\"flex gap-1 h-16 relative\">\n        {intensities.map((intensity, idx) => (\n          <div\n            key={idx}\n            className=\"flex-1 rounded transition-all hover:scale-105 cursor-pointer relative group\"\n            style={{\n              backgroundColor: getColor(intensity),\n              opacity: 0.3 + (intensity * 0.7)\n            }}\n            onMouseEnter={() => setHoveredSegment(idx)}\n            onMouseLeave={() => setHoveredSegment(null)}\n          >\n            {hoveredSegment === idx && (\n              <div className=\"absolute -top-20 left-1/2 transform -translate-x-1/2 bg-slate-900 text-white text-xs px-3 py-2 rounded shadow-lg z-10 whitespace-nowrap\">\n                <div className=\"font-semibold mb-1\">Segment {idx + 1}</div>\n                <div>Deviation: {(intensity * 100).toFixed(0)}%</div>\n                <div>Avg word length: {segmentFeatures[idx].avg_word_length.toFixed(2)}</div>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n      \n      <div className=\"flex justify-between mt-3 text-xs text-slate-600\">\n        <span>Start of text</span>\n        <span>End of text</span>\n      </div>\n      \n      <div className=\"flex items-center justify-center gap-4 mt-4 text-xs\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: '#3b82f6', opacity: 0.5 }}></div>\n          <span className=\"text-slate-600\">Low variation</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: '#ca8a04', opacity: 0.7 }}></div>\n          <span className=\"text-slate-600\">Medium variation</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: '#dc2626', opacity: 0.9 }}></div>\n          <span className=\"text-slate-600\">High variation</span>\n        </div>\n      </div>\n    </div>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}